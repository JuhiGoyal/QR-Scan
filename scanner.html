<!DOCTYPE html>
<html>
<head>
    <title>QR Scanner</title>
    <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>

<h2>Scan User QR</h2>

<label>Select Scan Type:</label>
<select id="scanType">
    <option value="gate">Gate</option>
    <option value="washroom">Washroom</option>
</select>

<br><br>

<div id="reader" style="width:350px;"></div>

<h3>Result:</h3>
<pre id="result"></pre>

<script>
function start() {
    const qrReader = new Html5Qrcode("reader");

    qrReader.start(
        { facingMode: "environment" },
        { fps: 10, qrbox: 250 },
        (qrUrl) => {
            const action = document.getElementById("scanType").value;
            const finalUrl = `${qrUrl}?action=${action}`;

            fetch(finalUrl)
                .then(res => res.json())
                .then(data => {
                    document.getElementById("result").innerText =
                        JSON.stringify(data, null, 2);
                });

            qrReader.stop();
        }
    );
}

start();
</script>

</body>
</html>
